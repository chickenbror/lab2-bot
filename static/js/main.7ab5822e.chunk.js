(this["webpackJsonpxstate-react-typescript-template"]=this["webpackJsonpxstate-react-typescript-template"]||[]).push([[0],{24:function(t,e,n){},35:function(t,e,n){"use strict";n.r(e);var o=n(23),a=n(11),r=(n(24),n(7),n(20)),s=n(41),i=n(4),c=n(40),y=n(39);function p(t){return Object(i.k)((e=>({type:"SPEAK",value:t})))}function m(){return Object(i.k)("LISTEN")}const d={John:{person:"John Appleseed"},Goofy:{person:"Goofy Dog"},Mickey:{person:"Mickey Mouse"},Minnie:{person:"Minnie Mouse"},Donald:{person:"Donald Duck"},Daisy:{person:"Daisy Duck"},"on Monday":{weekday:"Monday"},"on Tuesday":{weekday:"Tuesday"},"on Wednesday":{weekday:"Wednesday"},"on Thursday":{weekday:"Thursday"},"on Friday":{weekday:"Friday"},"on Saturday":{weekday:"Saturday"},"on Sunday":{weekday:"Sunday"},Monday:{weekday:"Monday"},Tuesday:{weekday:"Tuesday"},Wednesday:{weekday:"Wednesday"},Thursday:{weekday:"Thursday"},Friday:{weekday:"Friday"},Saturday:{weekday:"Saturday"},Sunday:{weekday:"Sunday"},1:{time:"13:00"},2:{time:"14:00"},3:{time:"15:00"},4:{time:"16:00"},5:{time:"17:00"},6:{time:"18:00"},7:{time:"19:00"},8:{time:"20:00"},9:{time:"21:00"},10:{time:"22:00"},11:{time:"15:00"},12:{time:"00:00"},"at 1":{time:"13:00"},"at 2":{time:"14:00"},"at 3":{time:"15:00"},"at 4":{time:"16:00"},"at 5":{time:"17:00"},"at 6":{time:"18:00"},"at 7":{time:"19:00"},"at 8":{time:"20:00"},"at 9":{time:"21:00"},"at 10":{time:"22:00"},"at 11":{time:"15:00"},"at 12":{time:"00:00"}},l={yes:{yes_no:!0},"of course":{yes_no:!0},sure:{yes_no:!0},absolutely:{yes_no:!0},yeah:{yes_no:!0},yep:{yes_no:!0},okay:{yes_no:!0},no:{yes_no:!1},nope:{yes_no:!1},"no thanks":{yes_no:!1},nah:{yes_no:!1}},u={initial:"init",states:{init:{on:{CLICK:"welcome"}},welcome:{initial:"prompt",on:{RECOGNISED:[{target:"parse_intent",actions:Object(i.b)((t=>({command:t.recResult})))},{target:".nomatch"}]},states:{prompt:{entry:p("What would you like to do?"),on:{ENDSPEECH:"ask"}},ask:{entry:m()},nomatch:{entry:p("Sorry I didn't get that."),on:{ENDSPEECH:"prompt"}}}},parse_intent:{invoke:{id:"guess_my_intent",src:(t,e)=>{return n=t.command,fetch(new Request("https://cors-anywhere.herokuapp.com/https://guess-my-intent.herokuapp.com/model/parse",{method:"POST",headers:{Origin:"http://maraev.me"},body:'{"text": "'.concat(n,'"}')})).then((t=>t.json()));var n},onDone:{target:"choices",actions:[Object(i.b)(((t,e)=>({command:e.data.intent.name}))),(t,e)=>console.log(e.data)]},onError:{target:"welcome",actions:(t,e)=>console.log(e.data)}}},choices:{always:[{target:"todo_list",cond:t=>"todo_item"===t.command},{target:"set_timer",cond:t=>"timer"===t.command},{target:"make_appointment",cond:t=>"appointment"===t.command}]},make_appointment:{initial:"prompt",on:{ENDSPEECH:"who"},states:{prompt:{entry:p("Sure. Let's create an appointment")}}},todo_list:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:p("Sure, creating a to-do list for you.")}}},set_timer:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:p("Sure, setting a timer for you.")}}},who:{initial:"prompt",on:{RECOGNISED:[{cond:t=>"person"in(d[t.recResult]||{}),actions:Object(i.b)((t=>({person:d[t.recResult].person}))),target:"day"},{target:".nomatch"}]},states:{prompt:{entry:p("Who are you meeting with?"),on:{ENDSPEECH:"ask"}},ask:{entry:m()},nomatch:{entry:p("Sorry I didn't get that."),on:{ENDSPEECH:"prompt"}}}},day:{initial:"pre_prompt",on:{RECOGNISED:[{cond:t=>"weekday"in(d[t.recResult]||{}),actions:Object(i.b)((t=>({weekday:d[t.recResult].weekday}))),target:"how_long"},{target:".nomatch"}]},states:{pre_prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"OK. Meeting ".concat(t.person,".")}))),on:{ENDSPEECH:"prompt"}},prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"On which day is your meeting?"}))),on:{ENDSPEECH:"ask"}},ask:{entry:m()},nomatch:{entry:p("Sorry I didn't get that."),on:{ENDSPEECH:"prompt"}}}},how_long:{initial:"pre_prompt",on:{RECOGNISED:[{cond:t=>"yes_no"in(l[t.recResult]||{})&&!0===l[t.recResult].yes_no,target:"confirm_whole_day"},{cond:t=>"yes_no"in(l[t.recResult]||{})&&!1===l[t.recResult].yes_no,target:"what_time"},{target:".nomatch"}]},states:{pre_prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"Ok, on ".concat(t.weekday,".")}))),on:{ENDSPEECH:"prompt"}},prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"Will it take the whole day?"}))),on:{ENDSPEECH:"ask"}},ask:{entry:m()},nomatch:{entry:p("Sorry I didn't get that."),on:{ENDSPEECH:"prompt"}}}},confirm_whole_day:{initial:"prompt",on:{RECOGNISED:[{cond:t=>"yes_no"in(l[t.recResult]||{})&&!0===l[t.recResult].yes_no,target:"done"},{cond:t=>"yes_no"in(l[t.recResult]||{})&&!1===l[t.recResult].yes_no,target:"who"},{target:".nomatch"}]},states:{prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"Alright. Shall I make an appointment with ".concat(t.person," on ").concat(t.weekday," for the whole day?")}))),on:{ENDSPEECH:"ask"}},ask:{entry:m()},nomatch:{entry:Object(i.k)((t=>({type:"SPEAK",value:"Sorry I didn't get that. Are you meeting ".concat(t.person," on ").concat(t.weekday," for the whole day?")}))),on:{ENDSPEECH:"ask"}}}},what_time:{initial:"pre_prompt",on:{RECOGNISED:[{cond:t=>"time"in(d[t.recResult]||{}),actions:Object(i.b)((t=>({time:d[t.recResult].time}))),target:"confirm_with_time"},{target:".nomatch"}]},states:{pre_prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"OK."}))),on:{ENDSPEECH:"prompt"}},prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"At what time is your meeting?"}))),on:{ENDSPEECH:"ask"}},ask:{entry:m()},nomatch:{entry:p("Sorry I didn't get that"),on:{ENDSPEECH:"prompt"}}}},confirm_with_time:{initial:"prompt",on:{RECOGNISED:[{cond:t=>"yes_no"in(l[t.recResult]||{})&&!0===l[t.recResult].yes_no,target:"done"},{cond:t=>"yes_no"in(l[t.recResult]||{})&&!1===l[t.recResult].yes_no,target:"who"},{target:".nomatch"}]},states:{prompt:{entry:Object(i.k)((t=>({type:"SPEAK",value:"Alright. Shall I make an appointment with ".concat(t.person," on ").concat(t.weekday," at ").concat(t.time,"?")}))),on:{ENDSPEECH:"ask"}},ask:{entry:m()},nomatch:{entry:Object(i.k)((t=>({type:"SPEAK",value:"Sorry I didn't get that. Are you meeting ".concat(t.person," on ").concat(t.weekday," at ").concat(t.time,"?")}))),on:{ENDSPEECH:"ask"}}}},done:{initial:"prompt",on:{ENDSPEECH:"init"},states:{prompt:{entry:p("Great, your appointment has been made.")}}}}};var E=n(19),h=n(12);Object(y.a)({url:"https://statecharts.io/inspect",iframe:!1});const g=Object(s.a)({id:"root",type:"parallel",states:{dm:Object(a.a)({},u),asrtts:{initial:"idle",states:{idle:{on:{LISTEN:"recognising",SPEAK:{target:"speaking",actions:Object(i.b)(((t,e)=>({ttsAgenda:e.value})))}}},recognising:{initial:"progress",entry:"recStart",exit:"recStop",on:{ASRRESULT:{actions:["recLogResult",Object(i.b)(((t,e)=>({recResult:e.value})))],target:".match"},RECOGNISED:"idle"},states:{progress:{},match:{entry:Object(i.k)("RECOGNISED")}}},speaking:{entry:"ttsStart",on:{ENDSPEECH:"idle"}}}}}},{actions:{recLogResult:t=>{console.log("<< ASR: "+t.recResult)},test:()=>{console.log("test")},logIntent:t=>{console.log("<< NLU intent: "+t.nluData.intent.name)}}}),S=t=>{switch(!0){case t.state.matches({asrtts:"recognising"}):return Object(h.jsx)("button",Object(a.a)(Object(a.a)({type:"button",className:"glow-on-hover",style:{animation:"glowing 20s linear"}},t),{},{children:"Listening..."}));case t.state.matches({asrtts:"speaking"}):return Object(h.jsx)("button",Object(a.a)(Object(a.a)({type:"button",className:"glow-on-hover",style:{animation:"bordering 1s infinite"}},t),{},{children:"Speaking..."}));default:return Object(h.jsx)("button",Object(a.a)(Object(a.a)({type:"button",className:"glow-on-hover"},t),{},{children:"Click to start"}))}};function k(){const t=Object(E.useSpeechSynthesis)({onEnd:()=>{m("ENDSPEECH")}}),e=t.speak,n=t.cancel,a=(t.speaking,Object(E.useSpeechRecognition)({onResult:t=>{m({type:"ASRRESULT",value:t})}})),r=a.listen,s=(a.listening,a.stop),i=Object(c.b)(g,{devTools:!0,actions:{recStart:Object(c.a)((()=>{console.log("Ready to receive a voice input."),r({interimResults:!1,continuous:!0})})),recStop:Object(c.a)((()=>{console.log("Recognition stopped."),s()})),ttsStart:Object(c.a)(((t,n)=>{console.log("Speaking..."),e({text:t.ttsAgenda})})),ttsCancel:Object(c.a)(((t,e)=>{console.log("TTS STOP..."),n()}))}}),y=Object(o.a)(i,3),p=y[0],m=y[1];y[2];return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(S,{state:p,onClick:()=>m("CLICK")})})}const b=document.getElementById("root");r.render(Object(h.jsx)(k,{}),b)}},[[35,1,2]]]);
//# sourceMappingURL=main.7ab5822e.chunk.js.map